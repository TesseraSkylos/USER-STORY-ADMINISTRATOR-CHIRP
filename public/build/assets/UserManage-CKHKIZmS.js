import{r as o,j as e,y as f,Y as C,L as R}from"./app-DrvQiGJ0.js";import{A as k}from"./AuthenticatedLayout-DgAnNrez.js";import{B as b,d as c}from"./index-DbJPPmyu.js";import{c as l}from"./utils-DMUi0Ij1.js";import"./ApplicationLogo-1Abdkdhh.js";import"./transition-Dh0CS1zv.js";const p=o.forwardRef(({className:r,type:s,...t},x)=>e.jsx("input",{type:s,className:l("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:x,...t}));p.displayName="Input";const j=o.forwardRef(({className:r,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:l("w-full caption-bottom text-sm",r),...s})}));j.displayName="Table";const g=o.forwardRef(({className:r,...s},t)=>e.jsx("thead",{ref:t,className:l("[&_tr]:border-b",r),...s}));g.displayName="TableHeader";const w=o.forwardRef(({className:r,...s},t)=>e.jsx("tbody",{ref:t,className:l("[&_tr:last-child]:border-0",r),...s}));w.displayName="TableBody";const L=o.forwardRef(({className:r,...s},t)=>e.jsx("tfoot",{ref:t,className:l("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s}));L.displayName="TableFooter";const m=o.forwardRef(({className:r,...s},t)=>e.jsx("tr",{ref:t,className:l("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s}));m.displayName="TableRow";const n=o.forwardRef(({className:r,...s},t)=>e.jsx("th",{ref:t,className:l("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s}));n.displayName="TableHead";const d=o.forwardRef(({className:r,...s},t)=>e.jsx("td",{ref:t,className:l("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s}));d.displayName="TableCell";const A=o.forwardRef(({className:r,...s},t)=>e.jsx("caption",{ref:t,className:l("mt-4 text-sm text-muted-foreground",r),...s}));A.displayName="TableCaption";function M({users:r,flash:s}){o.useEffect(()=>{s.message.success&&f.success(s.message.success),s.message.error&&f.error(s.message.error)},[s]);const[t,x]=o.useState(""),h=r.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.email.toLowerCase().includes(t.toLowerCase())),N=(a,i)=>{c.Inertia.put(route("usermanager.update",a),{role:i},{onSuccess:()=>c.Inertia.reload()})},v=(a,i)=>{c.Inertia.put(route("usermanager.update",{id:a}),{status:i==="active"?"banned":"active"},{})},y=a=>{confirm("Are you sure you want to delete this user?")&&c.Inertia.delete(route("usermanager.destroy",a),{})};return e.jsx(k,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"User Manager"}),children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx(p,{placeholder:"Search users...",value:t,onChange:a=>x(a.target.value),className:"mb-3 max-w-sm overflow-hidden bg-white shadow-sm sm:rounded-lg"}),e.jsxs("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:[e.jsx(C,{title:"UserManage"}),e.jsx(R,{}),e.jsxs(j,{children:[e.jsx(g,{children:e.jsxs(m,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Chirps Count"}),e.jsx(n,{children:"Role"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(w,{children:h.length>0?h.map(a=>{var i,u;return e.jsxs(m,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(d,{children:a.name}),e.jsx(d,{children:a.email}),e.jsx(d,{children:a.chirps_count}),e.jsx(d,{children:a.roles.length>0?a.roles[0].name:"No Role"}),e.jsx(d,{children:a.status}),e.jsxs(d,{className:"m-2",children:[e.jsxs("select",{value:((u=(i=a.roles)==null?void 0:i[0])==null?void 0:u.name)||"",onChange:T=>N(a.id,T.target.value),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsx(b,{onClick:()=>v(a.id,a.status),className:"mr-2",children:a.status==="active"?"Deactivate":"Activate"}),e.jsx(b,{onClick:()=>y(a.id),variant:"destructive",children:"Delete"})]})]},a.id)}):e.jsx(m,{children:e.jsx(d,{children:"No users found."})})})]})]})]})})})}export{M as default};
